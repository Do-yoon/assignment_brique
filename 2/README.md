# 문제2
이 프로그램은 TCP 소켓을 사용하여 구현된 클라이언트-서버 통신 예제입니다. 클라이언트는 서버에 메시지를 전송하고, 서버는 받은 메시지에 따라 다르게 응답하는 비동기 프로그램입니다.

## 프로그램 구조와 동작 설명
### 서버 (`server.js`)

1. **서버 생성 및 연결 대기**
   - `net.createServer()` 함수를 사용하여 서버를 생성하고, 클라이언트의 연결을 대기합니다.
   - 클라이언트가 연결되면 `Connected by (${clientAddress})`와 같은 메시지가 출력됩니다.

2. **메시지 수신 및 처리**
   - 클라이언트로부터 데이터를 수신하면(`socket.on('data', ...)`) 해당 데이터를 문자열로 변환하고 앞뒤 공백을 제거합니다.
   - 각 요청마다 고유한 번호(`requestCount`)를 부여하여 받은 메시지와 함께 출력합니다.

3. **응답 전송**
   - 받은 메시지가 'Ping'인 경우에는 'Pong'과 해당 요청 번호를 포함한 응답을 생성하여 클라이언트에게 전송합니다.
   - 'Ping'이 아닌 경우에는 받은 메시지와 요청 번호를 포함한 응답을 생성하여 전송합니다.
   - `setTimeout()` 함수를 사용하여 3초 지연 후에 응답을 전송합니다.

4. **오류 처리**
   - 소켓에서 오류가 발생할 경우(`socket.on('error', ...)`) 해당 오류 메시지를 출력합니다.

5. **서버 시작**
   - `server.listen()` 함수를 사용하여 서버를 특정 포트(여기서는 3000)에서 시작합니다.
   - 서버가 시작될 때 `Server is listening on port 3000`과 같은 메시지가 출력됩니다.

### 클라이언트 (`client.js`)

1. **메시지 전송**
   - `sendMessage()` 함수를 정의하여 클라이언트 소켓을 생성하고 서버에 메시지를 전송합니다.
   - 각 요청마다 고유한 번호(`requestCount`)를 부여하여 보낸 메시지와 함께 출력합니다.

2. **응답 수신**
   - 서버로부터 데이터를 수신하면(`client.on('data', ...)`) 해당 데이터를 문자열로 변환하여 출력합니다.
   - `client.destroy()` 함수를 호출하여 응답을 받은 후에 연결을 종료합니다.

3. **연결 종료 및 오류 처리**
   - 연결이 종료될 때(`client.on('close', ...)`) `Connection closed`와 같은 메시지가 출력됩니다.
   - 소켓에서 오류가 발생할 경우(`client.on('error', ...)`) 해당 오류 메시지를 출력합니다.

4. **비동기 요청**
   - `sendMessage()` 함수를 연속해서 호출하여 서버로 여러 메시지를 비동기적으로 전송합니다.
   - 각 메시지는 서버로부터 응답을 기다리지 않고 즉시 다음 메시지를 전송합니다.

## 실행 방법

1. **서버 실행**
   - 터미널에서 `node server.js` 명령어를 실행하여 서버를 시작합니다. 이때 서버는 포트 3000에서 클라이언트의 연결을 대기합니다.

2. **클라이언트 실행**
   - 다른 터미널에서 `node client.js` 명령어를 실행하여 클라이언트를 시작합니다. 클라이언트는 서버에 'Ping', 'Hello', 'foobar' 등의 메시지를 순서대로 전송합니다.

3. **프로그램 출력**
   - 각 클라이언트와 서버에서는 요청과 응답에 대한 상세한 메시지를 출력합니다. 클라이언트는 각 요청과 그에 대한 서버의 응답을 별도의 번호로 구분하여 출력하며, 서버는 받은 메시지와 해당 번호를 포함한 응답을 출력합니다.

## 실행 환경
* node v20.11.1
* Visual Studio Code